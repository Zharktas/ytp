{% ckan_extends %}

{% block organization_description %}
    {% if c.group_dict.description %}
      {{ h.render_markdown(h.extra_translation(c.group_dict, 'description')) }}
    {% endif %}

    {# display extra org info #}

    <div id="OrgExtraInfo">
        <dl>
            <dt>{{ _('Business ID') }}</dt>
            <dd>{{ c.group_dict.business_id }}</dd>
        </dl>
        <dl>
            <dt>{{ _('OID') }}</dt>
            <dd>{{ c.group_dict.oid }}</dd>
        </dl>
        <dl>
            <dt>{{ _('Alternative name') }}</dt>
            <dd>{{ h.extra_translation(c.group_dict, 'alternative_name') }}</dd>
        </dl>
        <dl>
            <dt>{{ _('Period of validity') }}</dt>
            <dd>{{ c.group_dict.valid_from }} - {{ c.group_dict.valid_till }}</dd>
        </dl>
    </div>

    {# display address info #}

    <div id="addressInfo">
        <h2 class="organization-subheading">{{_('Contact info')}}</h2>
        <dl>
            <dt>{{ _('Street')}}, {{_('House number')}}, {{_('Staircase')}}, {{_('Apartment number') }}</dt>
            <dd>{{ c.group_dict.street_address }}</dd>
        </dl>
        <dl>
            <dt>{{ _('P.O. box') }}</dt>
            <dd>{{ c.group_dict.street_address_pobox }}</dd>
        </dl>
        <dl>
            <dt>{{ _('Zip code') }}</dt>
            <dd>{{ c.group_dict.street_address_zip_code }}</dd>
        </dl>
        <dl>
            <dt>{{ _('Place of Business') }}</dt>
            <dd>{{ c.group_dict.street_address_place_of_business }}</dd>
        </dl>
        <dl>
            <dt>{{ _('Country') }}</dt>
            <dd>{{ c.group_dict.street_address_country }}</dd>
        </dl>
        <dl>
            <dt>{{ _('Unofficial name of the building') }}</dt>
            <dd>{{ h.extra_translation(c.group_dict, 'street_address_unofficial_name') }}</dd>
        </dl>
        <dl>
            <dt>{{ _('Building ID') }}</dt>
            <dd>{{ h.extra_translation(c.group_dict, 'street_address_building_id') }}</dd>
        </dl>
        <dl>
            <dt>{{ _('Getting there') }}</dt>
            <dd>{{ h.extra_translation(c.group_dict, 'street_address_getting_there', markdown=True) }}</dd>
        </dl>
        <dl>
            <dt>{{ _('Parking') }}</dt>
            <dd>{{ h.extra_translation(c.group_dict, 'street_address_parking', markdown=True) }}</dd>
        </dl>
        <dl>
            <dt>{{ _('Arrival by public transport') }}</dt>
            <dd>{{ h.extra_translation(c.group_dict, 'street_address_public_transport') }}</dd>
        </dl>
        <dl>
            <dt>{{ _('URL for public transport') }}</dt>
            {% set url = h.extra_translation(c.group_dict, 'street_address_url_public_transport') %}
            <dd><a href="{{ url }}">{{ url }}</a></dd>
        </dl>
    </div>

    {# display homepages #}
    {% set page_list = c.group_dict.get('homepage_urls') %}
    {% set desc_list = c.group_dict.get('homepage_descriptions') %}
    {% set title_list = c.group_dict.get('homepage_titles') %}
    {% set accessibility_list = c.group_dict.get('homepage_accessibilities') %}
    {% set wcag_list = c.group_dict.get('homepage_wcags') %}
    {% set plainlanguage_list = c.group_dict.get('homepage_plain_language_availabilities') %}


    {% if page_list %}
        <div id="homepages">
        {% for page in page_list %}
            <div id="Homepage_{{ loop.index }}" class="homepage single">
                <div class="homepage static">
                    <h3>{{title_list[loop.index0]}}</h3>
                    <a href="{{page}}">{{page}}</a>
                    <p>{{desc_list[loop.index0]}}</p>
                    <p>{{accessibility_list[loop.index0]}}</p>
                    <p>{{wcag_list[loop.index0]}}</p>
                    <p>
                        {% if plainlanguage_list[loop.index0] == "1" %}
                        {% set plainlanguageCheckbox  = {"onclick": "ToggleCheckbox(this)", 'checked': 'checked' } %}
                        {{ _('Plain language translation available') }}
                        {% else %}
                        {% set plainlanguageCheckbox  = {"onclick": "ToggleCheckbox(this)"} %}
                        {{ _('Plain language translation not available') }}
                        {% endif %}
                    </p>
                </div>
            </div>
        {% endfor %}
        </div>
    {% endif %}


    {# TODO: Add JSTree #}

  <div id="publisher-tree">
     {% snippet 'organization/snippets/organization_tree.html', top_nodes=[h.get_action('group_tree_section', {'id': c.group_dict.id, 'type': c.group_dict.type})] %}
  </div>
{% endblock %}
