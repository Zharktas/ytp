language: python
python:
  - "2.7"

branches:
  only:
  - master
  - beta
  - /^release-.*$/
  - ci-testing
notifications:
  flowdock: 4c5e3d825b1a21302c14ae60aaf9e36c
cache:
  directories:
    - /usr/lib/ckan/default/src/
    - $HOME/cache
  apt: true
before_install:
  - sudo apt-get update && sudo apt-get upgrade
install:
  - pip install ansible
script:
  - "ansible-playbook -i travis/travis-ansible-inventory ansible/single-server.yml --syntax-check"

  # Run the role/playbook with ansible-playbook.
  - "ansible-playbook -i travis/travis-ansible-inventory -v ansible/single-server.yml --connection=local --sudo"
